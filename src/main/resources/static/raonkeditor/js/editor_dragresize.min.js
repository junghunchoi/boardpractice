function keditorDragResize(){var b={resizeName:"K_Editor_drag_resize",handles:"tl tm tr ml mr bl bm br".split(" "),handle:null,minWidth:0,minHeight:0,minLeft:-99999,maxLeft:99999,minTop:-99999,maxTop:99999,mouseX:0,mouseY:0,lastMouseX:0,lastMouseY:0,iframeDocLastMouseX:0,iframeDocLastMouseY:0,topMouseX:null,topMouseY:null,docMouseX:null,docMouseY:null,docLastMouseX:0,docLastMouseY:0,mOffX:0,mOffY:0,elmX:0,elmY:0,elmW:0,elmH:0,dragResizeIconInterval:null,G_REMOVE_dragResizeIcon:!0,G_keditorResize_elem:null,
G_keditorResize_OverElem:null,G_keditorResize_showContext:!0,G_keditorResizeIcon:null,G_editIconTagName:",table,div,",G_keditorResizeEditIcon:null,G_keditorResizeEditElem:null,G_keditorResizeDiv:null,G_keditorResizeHandleHolder:null,G_keditorResizeDivBorder:1,G_keditorResizeIconSrc1:"data:image/gif;base64,R0lGODdhDQANAHcAACwAAAAADQANAIcAAACAAAAAgACAgAAAAICAAIAAgIDAwMDA3MCmyvD/+/CgoKSAgID/AAAA/wD//wAAAP//AP8A//////9NT1Cbm5v///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABOteJOteoY8WhOtfQAAAAAAAAoD3oAAABxj6AY8NRFEvoAAAr///8AAAAAAAAY8QA/YvoBAsIAAAr///8AAAAoD3q6q80AAAAAAAAoD3oY8RAY8SxGAjBxj6AY8Xg/bZE/bVFKAQ8AAAoY8Tig8JwAATgAAB8Y8UAY8VSg8QcAAVcY8VidWk8AAggAAACdYQedYMIBLZYFIRwAAAAAAA0uAADV6mAAAAAAAggAAAAY8aidayidbCkFLKQAAFQY8qQY8bCdbJIFLKQAAFQY8qQY8uQY8nxG/UAFLKQAAFQY8qRAaYZG+i0Y8oxG/UEY8nwFIRwAAADLeDgAAAABAAAAIRyiATCiAaCiATAY8hSdWEeiAaABAAAAIRwFAACdV1idV9MFIRxAYtVAXWyqAVBAQ65AXKkY8gFAYm1G9ZcY8viqAVCqALwFLKQY8vgY8nhHEonl4SBHEpEFIRwAAADLeDiqAFDLeDgY8wBHAg4AAAAAAAAY8qQY8wxHAhgY8wAY8z+qAYAAAAEAAAAAAA0AAA0AACgYAAEuAAAAACgAAA0AAA0YAAEAAAAAAggAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFLKQY84RHHWIY8ycAAAFHAn1HHZ5xj6DG5SgAAAEAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAGAAIPAArCBxIkOCEgwgTThCokIJChggpSEwIMeLDCgcdTtCokaHEjyAXYtyYsaTIhhcTfqQ40iJLhTALyhwYEAA7",
G_keditorResizeBackSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAbCAYAAACJISRoAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjYxNUNGOTEwQUM4MTFFNzk5RDI5MEMzQ0Y5RkRFRTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjYxNUNGOTIwQUM4MTFFNzk5RDI5MEMzQ0Y5RkRFRTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyNjE1Q0Y4RjBBQzgxMUU3OTlEMjkwQzNDRjlGREVFNSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyNjE1Q0Y5MDBBQzgxMUU3OTlEMjkwQzNDRjlGREVFNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ptsh5hAAAAHHSURBVHja3JZPSwJBGMbXP9QnCMkg+gweyg+wJtK5iC51jqRrgZ7s0L1zYJeIiKJDiOg9DeoqiiEdXLwqKq62O/ksvbLZDDvTv0MD4+zM7MyPd55n3tXHGNN+u/i1PyhKkPLDUzQW3yigVaLguGRqqfwY1VfXC02jxdCiL7tWGYCiClIGUFEBeUJ4gGmQ1x5Swi8uRezg7II9Fr2IPlr0MS6zPuj1QiF/GaNnOIueX81m4MsWJpu6N5QptIZrb5HIgZmwxdMHWvB0wPuNxgvXDEIXiSC2bQsh/X6f1Z8bn0A+/CDEVPo4c5Y90cPzIQq/yDuWfO5Cjyc2uXO3N1kd+xlGS9vdOyweZQ7SK8uRkqdNqSACy7KcOhqN2HA4ZKZpssFgwBBBr9dj3W6XdTod1m63WaVSnUTsuAvE7Z2kJhNJ7u5cT6xtceeur04nkST3U04kH4SX1QQRiDRxR+DWRNldOCIRhAfgphUC8TbCGDQQzYlymXSqp40gsky+UspduMXjPGWhkoZOPnofk8kMQZmUUa/e+0OhOQAc90y56PtfRtIIN5l3D37ke+IG1Wp1ZYCS8ARSBSi7i0AqgEmC/Bd/7t4EGABOzb4ZtI2OfAAAAABJRU5ErkJggg==",
G_keditorResizeEditIconSrc:"data:image/png;base64,R0lGODlhDwAPAMQAAPzqrG5ubmJiYlBPTMrKyv7s1fzINf7aVO7u7qysrE5NS+kwL/+rsu/v70hGQe6xDtpDVD09PREAAFFRUURERP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4zLWMwMTEgNjYuMTQ1NjYxLCAyMDEyLzAyLzA2LTE0OjU2OjI3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBQUIwMDJGNTEwNUMxMUU3QTQ1RDg2M0VCRDhDNDFCNSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBQUIwMDJGNjEwNUMxMUU3QTQ1RDg2M0VCRDhDNDFCNSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkFBQjAwMkYzMTA1QzExRTdBNDVEODYzRUJEOEM0MUI1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkFBQjAwMkY0MTA1QzExRTdBNDVEODYzRUJEOEM0MUI1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAAAAAAAsAAAAAA8ADwAABVVgoFBkaZIiUa1sK0lkK1cSA8EzOxXSguc7AEDioAABh8OkEos4K40JwGBYMo0VwSpRmTys15W2i0CAw9mVZMJtxdK5VfMZf8dZlIHqXiEMAgMngn8hADs=",
G_keditorResizeBackDiv:null,G_isResize:!1,G_isDrag:!1,G_firstDrag:!1,G_checkTagName:",img,iframe,td,th,table,embed,div,video,",G_deleteCheckTagName:",table,video,",G_mouseOveriframeObj:null,G_keditorIframeOverDiv:null,G_startX:0,G_startY:0,G_dragX:0,G_dragY:0,G_lastDragX:0,G_lastDragY:0,G_orgEnterTag:"",G_ie8Bug:!1,keyDownEvt:null,G_keditorResize_elem_Rect:null,G_UseMouseTableInoutdent:!1,G_ImageR:1,G_ResizeHandlerActivatedFlag:!1,G_setUndo:!1},a;for(a in b)this[a]=b[a]}
keditorDragResize.prototype.selection=function(b){try{if(b){KEDITORTOP.G_CURRKEDITOR.keditor_dragresize.preventScrollMove();var a=getFirstRange(),c=a.range;a.sel.removeAllRanges();c.selectNode(b);a.sel.addRange(c);(KEDITORTOP.RAONKEDITOR.browser.chrome||KEDITORTOP.RAONKEDITOR.browser.opera)&&b.tagName&&"TABLE"==b.tagName&&(KEDITORTOP.RAONKEDITOR.G_COPIEDTABLE=b,command_tableCopy(KEDITORTOP.G_CURRKEDITOR.ID,KEDITORTOP.G_CURRKEDITOR,!0))}}catch(d){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&
console.log(d)}};
keditorDragResize.prototype.apply=function(b){try{var a=this;a.mouseDownEvt=function(b){try{a.mouseDown(b)}catch(c){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(c)}};a.mouseMoveTopEvt=function(b){try{a.elementResize(b,"top")}catch(c){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(c)}};a.mouseUpEvt=function(b){try{a.mouseUp(b)}catch(c){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(c)}};a.mouseOverEvt=
function(b){try{a.mouseOver(b)}catch(c){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(c)}};a.keyDownEvt=function(b){try{a.keyDown(b)}catch(c){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(c)}};a.dragEndEvt=function(b){try{a.dragEnd(b)}catch(c){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(c)}};KEDITORTOP.RAONKEDITOR.util.addEvent(b,"mouseover",a.mouseOverEvt,!0);KEDITORTOP.RAONKEDITOR.util.addEvent(b,
"mousedown",a.mouseDownEvt,!0);KEDITORTOP.RAONKEDITOR.util.addEvent(KEDITORTOP.KEDITORDOC,"mousemove",a.mouseMoveTopEvt,!0);KEDITORTOP.RAONKEDITOR.util.addEvent(KEDITORTOP.KEDITORDOC,"mouseup",a.mouseUpEvt,!0);KEDITORTOP.RAONKEDITOR.util.addEvent(document,"mouseup",a.mouseUpEvt,!0);KEDITORTOP.RAONKEDITOR.util.addEvent(b,"mouseup",a.mouseUpEvt,!0);KEDITORTOP.RAONKEDITOR.util.addEvent(b,"dragstart",function(){a.removePreventScrollMove()});KEDITORTOP.RAONKEDITOR.util.addEvent(b,"dragend",a.dragEndEvt,
!0)}catch(c){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(c)}};
keditorDragResize.prototype.remove=function(b){try{KEDITORTOP.RAONKEDITOR.util.removeEvent(b,"mouseover",this.mouseOverEvt,!0),KEDITORTOP.RAONKEDITOR.util.removeEvent(b,"mousedown",this.mouseDownEvt,!0),KEDITORTOP.RAONKEDITOR.util.removeEvent(KEDITORTOP.KEDITORDOC,"mousemove",this.mouseMoveTopEvt,!0),KEDITORTOP.RAONKEDITOR.util.removeEvent(KEDITORTOP.KEDITORDOC,"mouseup",this.mouseUpEvt,!0),KEDITORTOP.RAONKEDITOR.util.removeEvent(document,"mouseup",this.mouseUpEvt,!0),KEDITORTOP.RAONKEDITOR.util.removeEvent(b,
"mouseup",this.mouseUpEvt,!0),KEDITORTOP.RAONKEDITOR.util.removeEvent(b,"dragend",this.dragEndEvt,!0)}catch(a){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(a)}};keditorDragResize.prototype.dragEnd=function(b){with(this)"1"!=KEDITORTOP.G_CURRKEDITOR._config.dragResizeMovable&&G_keditorResize_elem&&"absolute"!=G_keditorResize_elem.style.position.toLowerCase()&&(selection(G_keditorResize_elem),resizeHandleClear(),this.removePreventScrollMove())};
keditorDragResize.prototype.mouseDown=function(b){if(!KEDITORTOP.G_CURRKEDITOR._FRAMEWIN.isViewMode(KEDITORTOP.G_CURRKEDITOR)){var a=b?b:_iframeWin.event;if(0!=checkContentEditable(KEDITORTOP.G_CURRKEDITOR,a.target?a.target:a.srcElement)&&!checkClickOnScrollBar(b))with(this)try{var c=b.target||b.srcElement;if(isRightClick(b)){G_keditorResize_elem&&(c=G_keditorResize_elem);this.resizeHandleClear();"img"==c.tagName.toLowerCase()&&selection(c);return}G_ie8Bug=!1;if(G_keditorResizeEditElem){if(G_keditorResizeEditElem==
c)return;var d=GetParentbyTagName(c,"div");if(d&&G_keditorResizeEditElem==d)return;KEDITORTOP.G_CURRKEDITOR._config.enterTag=G_orgEnterTag;G_keditorResizeEditElem=null}if(0>",table,td,th,".indexOf(","+c.tagName.toLowerCase()+",")&&-1<G_checkTagName.indexOf(","+c.tagName.toLowerCase()+",")&&G_keditorResizeIcon!=c&&c!=G_keditorResizeDiv){G_UseMouseTableInoutdent=!1;if("div"==c.tagName.toLowerCase()){if(-1<c.className.indexOf("keditor_Page_Break"))return;if(""!=KEDITORTOP.G_CURRKEDITOR._config.dragResizeApplyDivClass&&
0>(","+KEDITORTOP.G_CURRKEDITOR._config.dragResizeApplyDivClass+",").indexOf(","+c.className+",")){resizeHandleClear();return}}a=!1;G_keditorResize_elem&&G_keditorResize_elem!=c&&(c.tagName.toLowerCase()==G_keditorResize_elem.tagName.toLowerCase()||"div"==c.tagName.toLowerCase()&&"iframe"==G_keditorResize_elem.tagName.toLowerCase())&&(a=!0);resizeHandleClear();G_keditorResize_elem=c;clearInterval(dragResizeIconInterval);setResizeHandle(b,!0,"doc");a&&(G_ie8Bug=!0);"1"==KEDITORTOP.G_CURRKEDITOR._config.dragResizeMovable||
"absolute"==G_keditorResize_elem.style.position.toLowerCase()||"div"==c.tagName.toLowerCase()?KEDITORTOP.RAONKEDITOR.util.cancelEvent(b):selection(c)}else G_keditorResizeIcon!=c&&c!=G_keditorResizeDiv&&(GetParentbyTagName(c,"div"),resizeHandleClear())}catch(e){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(e)}}};
keditorDragResize.prototype.mouseOver=function(b){var a=getEditrFromEvent(b);if(!a._FRAMEWIN.isViewMode(a)){var c=b?b:_iframeWin.event,d=c.target?c.target:c.srcElement;if(0==checkContentEditable(a,d))KEDITORTOP.RAONKEDITOR.util.cancelEvent(b);else with(a.keditor_dragresize)try{a=getEditrFromEvent(b);if(isViewMode(a))return;var d=null,c=b?b:_iframeWin.event,d=c.target?c.target:c.srcElement,e=d.tagName?d.tagName.toLowerCase():null;if(null==d||null==e||(new RegExp(resizeName+"-([trmbl]{2})","")).test(d.className)||
"K_Editor_drag_resizeinfo"==d.className||d==G_keditorResizeBackDiv||d==G_keditorResizeIcon||d==G_keditorResizeDiv||d==G_keditorIframeOverDiv)return;if(-1<G_checkTagName.indexOf(","+e+",")){if("div"==e){if(-1<d.className.indexOf("keditor_Page_Break"))return;if(""!=a._config.dragResizeApplyDivClass){var g=","+a._config.dragResizeApplyDivClass+",";if(0>g.indexOf(","+d.className+","))return}}"iframe"==e?(G_mouseOveriframeObj=d,setIfameOverDiv(b)):clearIfameOverDiv();G_REMOVE_dragResizeIcon=!1;var f;f=
"td"==e||"th"==e?GetParentbyTagName(d,"table"):d;if("table"==f.tagName.toLowerCase()&&checkNoResizeTable(f))return;"IMG"==f.tagName&&"FIGURE"==f.parentNode.tagName&&(f=f.parentNode);if(G_keditorResize_elem==f||G_keditorResize_OverElem==f)return;G_keditorResize_OverElem=f;if("div"==G_keditorResize_OverElem.tagName.toLowerCase()&&"div"==_iframeDoc.activeElement.tagName.toLowerCase())return;G_ResizeHandlerActivatedFlag||setResizeIcon();KEDITORTOP.RAONKEDITOR.util.addEvent(G_keditorResize_OverElem,"mouseout",
ResizeElmOutEvt)}else{var h=GetParentbyTagName(d,"table"),k=GetParentbyTagName(d,"div");if(h||k){h&&k?G_keditorResize_OverElem=GetParentbyTagName(k,"table")?k:h:h?G_keditorResize_OverElem=h:k&&(G_keditorResize_OverElem=k);if("div"==G_keditorResize_OverElem.tagName.toLowerCase()&&"div"==_iframeDoc.activeElement.tagName.toLowerCase())return;if("table"==G_keditorResize_OverElem.tagName.toLowerCase()&&checkNoResizeTable(G_keditorResize_OverElem)){G_keditorResize_OverElem=null;return}if("div"==G_keditorResize_OverElem.tagName.toLowerCase()&&
(-1<G_keditorResize_OverElem.className.indexOf("keditor_Page_Break")||""!=a._config.dragResizeApplyDivClass&&(g=","+a._config.dragResizeApplyDivClass+",",0>g.indexOf(","+G_keditorResize_OverElem.className+","))))return;G_ResizeHandlerActivatedFlag||setResizeIcon();KEDITORTOP.RAONKEDITOR.util.addEvent(G_keditorResize_OverElem,"mouseout",ResizeElmOutEvt)}}if(G_keditorResize_OverElem&&G_keditorResize_OverElem.getAttribute("raon_plugin")){var l=G_keditorResize_OverElem.getAttribute("raon_plugin");switch(G_keditorResize_OverElem.tagName.toLowerCase()){default:if(G_KPlugin[l]&&
G_KPlugin[l].onDragResizeMouseOverElement)G_KPlugin[l].onDragResizeMouseOverElement(G_keditorResize_OverElem)}}}catch(n){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(n)}}};
keditorDragResize.prototype.checkNoResizeTable=function(b){var a=KEDITORTOP.G_CURRKEDITOR._config.tableNoResizeClass;if(""!=a&&b.className&&""!=b.className)for(var c=b.className.split(" "),d=c.length,e=!1,g=0;g<d;g++)if(c[g]==a){e=!0;break}e||"1"==KEDITORTOP.G_CURRKEDITOR._config.formMode||"1"!=KEDITORTOP.G_CURRKEDITOR._config.userTableLock.use||(e=checkLockAttr(b));return e};
keditorDragResize.prototype.setResizeIcon=function(){if(!dragMove.dragStart)with(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize)try{if(null==G_keditorResizeIcon&&(keditorResizeIcon=_iframeDoc.createElement("img"),keditorResizeIcon.id="keditorResizeIcon",keditorResizeIcon.src=G_keditorResizeIconSrc1,keditorResizeIcon.style.position="absolute",keditorResizeIcon.style.zIndex=1E3,keditorResizeIcon.style.cursor="move",keditorResizeIcon.unSelectable="on",keditorResizeIcon.alt="",G_keditorResizeIcon=keditorResizeIcon,
getEditorFrameDoc(KEDITORTOP.G_CURRKEDITOR).body.appendChild(G_keditorResizeIcon),KEDITORTOP.RAONKEDITOR.util.addEvent(G_keditorResizeIcon,"mouseover",function(){G_REMOVE_dragResizeIcon=!1}),KEDITORTOP.RAONKEDITOR.util.addEvent(G_keditorResizeIcon,"mouseout",function(){G_REMOVE_dragResizeIcon=!0}),KEDITORTOP.RAONKEDITOR.util.addEvent(G_keditorResizeIcon,"mousedown",function(a){KEDITORTOP.G_CURRKEDITOR._LastRange=saveSelection(KEDITORTOP.G_CURRKEDITOR.ID,!0)}),KEDITORTOP.RAONKEDITOR.util.addEvent(G_keditorResizeIcon,
"mouseup",function(a){var b=null;G_REMOVE_dragResizeIcon=!1;var c=G_keditorResize_OverElem;try{if(c&&"table"==c.nodeName.toLowerCase()){var d=c.getElementsByTagName("th");d&&0<d.length||(d=c.getElementsByTagName("td"));setFocusChildForStyle(d[0],0);b=getFirstRange().range;KEDITORTOP.G_CURRKEDITOR._LastRange=b}}catch(e){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(e)}null!=KEDITORTOP.G_CURRKEDITOR._LastRange&&restoreSelection(null,!0);KEDITORTOP.G_CURRKEDITOR._config.useMouseTableInoutdent&&
(G_keditorResize_elem_Rect=getClientRect(c),G_UseMouseTableInoutdent="TABLE"==c.nodeName?!0:!1);resizeHandleClear();G_keditorResize_elem=c;clearInterval(dragResizeIconInterval);setResizeHandle(a,!0);G_CURSOR_ELEMENT=c;"img"==c.nodeName.toLowerCase()&&(G_keditorResize_Elem_Flag=!0);KEDITORTOP.RAONKEDITOR.browser.ie&&9>KEDITORTOP.RAONKEDITOR.browser.ieVersion&&stopDragElem()}),KEDITORTOP.RAONKEDITOR.util.addEvent(G_keditorResizeIcon,"dragstart",function(a){G_REMOVE_dragResizeIcon=!0;G_keditorResizeIcon.parentNode&&
(G_keditorResizeIcon.parentNode.removeChild(G_keditorResizeIcon),clearIfameOverDiv());G_keditorResizeIcon=null;clearInterval(dragResizeIconInterval);dragResizeIconInterval=null;!KEDITORTOP.RAONKEDITOR.browser.ie||9<KEDITORTOP.RAONKEDITOR.browser.ieVersion?dragMoveStart(a,G_keditorResize_OverElem):KEDITORTOP.RAONKEDITOR.util.cancelEvent(a)})),G_keditorResizeIcon){G_REMOVE_dragResizeIcon=!1;var b=getElementOffset(_iframeWin.frameElement),a=getClientRect(G_keditorResize_OverElem),c=0,d;0<=a.left&&(c=
b.left+a.left);G_keditorResizeIcon.style.left=c+"px";d="img"==G_keditorResize_OverElem.nodeName.toLowerCase()?b.top+a.top:b.top+(a.top-13);G_keditorResizeIcon.style.top=d+"px"}}catch(e){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(e)}};
keditorDragResize.prototype.setIfameOverDiv=function(b){with(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize)try{G_keditorIframeOverDiv&&(clearIfameOverDiv(),G_keditorIframeOverDiv=null);var a;a=_iframeDoc.createElement("div");a.id="keditorIframeOverDiv";a.contentEditable="false";a.style.position="absolute";a.style.cursor="move";KEDITORTOP.RAONKEDITOR.browser.ie&&9>KEDITORTOP.RAONKEDITOR.browser.ieVersion?(a.style.filter="alpha(opacity=1)",a.style.background="white"):KEDITORTOP.RAONKEDITOR.browser.ie&&
(a.style.opacity="0.1",a.style.background="white");a.style.zIndex=G_mouseOveriframeObj.style.zIndex;var c=getElementOffset(_iframeWin.frameElement),d=getClientRect(G_mouseOveriframeObj);a.style.left=c.left+d.left+"px";a.style.top=c.top+d.top+"px";a.style.width=d.right-d.left+"px";a.style.height=d.bottom-d.top+"px";G_keditorIframeOverDiv=a;getEditorFrameDoc(KEDITORTOP.G_CURRKEDITOR).body.appendChild(G_keditorIframeOverDiv);KEDITORTOP.RAONKEDITOR.util.addEvent(G_keditorIframeOverDiv,"mousedown",ifameOverDivClick)}catch(e){KEDITORTOP&&
KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(e)}};
keditorDragResize.prototype.ifameOverDivClick=function(b){with(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize)try{var a=G_mouseOveriframeObj;resizeHandleClear();G_keditorResize_OverElem=null;G_keditorResize_elem=a;clearInterval(dragResizeIconInterval);setResizeHandle(b,!0);KEDITORTOP.RAONKEDITOR.browser.ie||setTimeout(function(){restoreSelection(saveSelection(KEDITORTOP.G_CURRKEDITOR.ID,!0),!0)},0)}catch(c){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(c)}};
keditorDragResize.prototype.setHandlePosition=function(){with(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize)for(var b=getElementOffset(_iframeWin.frameElement),a=getClientRect(G_keditorResize_elem),c=0,d=0,e=0;e<handles.length;e++){switch(handles[e]){case "tl":c=b.left+a.left-7;d=b.top+a.top-7;break;case "tm":c=b.left+a.left+.5*(a.right-a.left);d=b.top+a.top-7;break;case "tr":c=b.left+a.left+(a.right-a.left);c>=_iframeWin.frameElement.offsetWidth&&(c-=7);d=b.top+a.top-7;break;case "ml":c=b.left+a.left-
7;d=b.top+a.top+.5*(a.bottom-a.top);break;case "mr":c=b.left+a.left+(a.right-a.left);c>=_iframeWin.frameElement.offsetWidth&&(c-=7);d=b.top+a.top+.5*(a.bottom-a.top);break;case "bl":c=b.left+a.left-7;d=b.top+a.top+(a.bottom-a.top);break;case "bm":c=b.left+a.left+.5*(a.right-a.left);d=b.top+a.top+(a.bottom-a.top);break;case "br":c=b.left+a.left+(a.right-a.left),c>=_iframeWin.frameElement.offsetWidth&&(c-=7),d=b.top+a.top+(a.bottom-a.top)}G_keditorResizeHandleHolder[handles[e]].style.left=c+"px";G_keditorResizeHandleHolder[handles[e]].style.top=
d+"px"}};
keditorDragResize.prototype.setResizeHandle=function(b,a,c){with(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize)try{if(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize.G_keditorResizeDiv)e=getElementOffset(_iframeWin.frameElement),g=getClientRect(G_keditorResize_elem),G_UseMouseTableInoutdent&&0>parseInt(G_keditorResize_elem.style.marginLeft)||(G_keditorResizeDiv.style.left=e.left+g.left-G_keditorResizeDivBorder+"px"),G_keditorResizeDiv.style.top=G_UseMouseTableInoutdent?e.top+G_keditorResize_elem_Rect.top-G_keditorResizeDivBorder+
"px":e.top+g.top-G_keditorResizeDivBorder+"px",G_keditorResizeDiv.style.width=g.right-g.left+"px",G_keditorResizeDiv.style.height=g.bottom-g.top+"px";else{ClearDraggingTableCellSelected();var d;d=_iframeDoc.createElement("div");d.className="K_Editor_drag_resize_Element K_edITor_drag_move_Handle";d.id="keditorResizeDiv";d.contentEditable="false";if("1"==KEDITORTOP.G_CURRKEDITOR._config.dragResizeMovable||G_UseMouseTableInoutdent)d.style.background="url("+G_keditorResizeBackSrc+") no-repeat 50% 50%";
d.style.position="absolute";d.style.border=G_keditorResizeDivBorder+"px solid transparent";d.style.cursor="move";d.style.zIndex=KEDITORTOP.G_CURRKEDITOR._config.zIndex+100;"div"!=G_keditorResize_elem.tagName.toLowerCase()&&"absolute"!=G_keditorResize_elem.style.position&&"1"!=KEDITORTOP.G_CURRKEDITOR._config.dragResizeMovable&&(d.style.display="none",G_UseMouseTableInoutdent&&(d.style.display=""));var e=getElementOffset(_iframeWin.frameElement),g=getClientRect(G_keditorResize_elem);G_UseMouseTableInoutdent&&
0>parseInt(G_keditorResize_elem.style.marginLeft)||(d.style.left=e.left+g.left-G_keditorResizeDivBorder+"px");d.style.top=G_UseMouseTableInoutdent?e.top+G_keditorResize_elem_Rect.top-G_keditorResizeDivBorder+"px":e.top+g.top-G_keditorResizeDivBorder+"px";this.setDragResizeDivSize(d);this.setDragResizeDivPosition(d);G_keditorResizeHandleHolder=_iframeDoc.createElement("div");G_keditorResizeHandleHolder.unSelectable="on";for(e=0;e<handles.length;e++){var f=document.createElement("div");f.className=
resizeName+" "+resizeName+"-"+handles[e];f.unSelectable="on";f.style.zIndex=KEDITORTOP.G_CURRKEDITOR._config.zIndex+101;G_keditorResizeHandleHolder.appendChild(f);G_keditorResizeHandleHolder[handles[e]]=f}setHandlePosition();var h=getEditorFrameDoc(KEDITORTOP.G_CURRKEDITOR);h.body.appendChild(G_keditorResizeHandleHolder);f=document.createElement("div");f.className="K_Editor_drag_resizeinfo";f.style.position="absolute";f.style.fontSize="11px";f.style.display="none";f.unSelectable=!0;var k=document.createElement("span");
f.appendChild(k);G_keditorResizeHandleHolder.appendChild(f);G_keditorResizeHandleHolder.keditor_resizeinfo=f;G_keditorResizeEditElem&&(KEDITORTOP.G_CURRKEDITOR._config.enterTag=G_orgEnterTag,G_keditorResizeEditElem=null);if(G_keditorResize_elem.isContentEditable&&-1<G_editIconTagName.indexOf(","+G_keditorResize_elem.tagName.toLowerCase()+",")){var l=_iframeDoc.createElement("img");l.id="keditorResizeEditIcon";l.src=G_keditorResizeEditIconSrc;l.style.zIndex=99999999;l.style.position="absolute";l.style.cursor=
"pointer";l.style.right="0px";l.style.top="0px";d.appendChild(l);G_keditorResizeEditIcon=l}h=getEditorFrameDoc(KEDITORTOP.G_CURRKEDITOR);h.body.appendChild(d);G_keditorResizeDiv=d;d="keditorResize";var n=G_keditorResize_elem.tagName.toLowerCase();if("img"==n){var q,m;if(-1<G_keditorResize_elem.style.width.indexOf("%")||-1<G_keditorResize_elem.style.height.indexOf("%")){var p=getClientRect(G_keditorResize_elem);q=p.right-p.left;m=p.bottom-p.top}else""!=G_keditorResize_elem.style.width?q=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(G_keditorResize_elem.style.width):
(p=getClientRect(G_keditorResize_elem),q=p.right-p.left),""!=G_keditorResize_elem.style.height?m=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(G_keditorResize_elem.style.height):(p=getClientRect(G_keditorResize_elem),m=p.bottom-p.top);G_ImageR=1*q/m;KEDITORTOP.RAONKEDITOR.G_SELECTED_IMAGE_ELEMENT=G_keditorResize_elem;d=GetParentbyTagName(G_keditorResize_elem,"figure")?"focusFigure":"focusImage"}else"table"==n&&(d="focusTable");KEDITORTOP.G_CURRKEDITOR._iconEnable(d);KEDITORTOP.RAONKEDITOR.util.removeEvent(G_keditorResizeDiv,
"keydown",keyDown);KEDITORTOP.RAONKEDITOR.util.addEvent(G_keditorResizeDiv,"mousedown",startDragElem);KEDITORTOP.RAONKEDITOR.util.addEvent(G_keditorResizeHandleHolder,"mousedown",startDragElem)}a&&startDragElem(b,c)}catch(v){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(v)}};
keditorDragResize.prototype.ResizeElmOutEvt=function(b){b=getEditrFromEvent(b);with(b.keditor_dragresize)try{G_REMOVE_dragResizeIcon=!0,null==dragResizeIconInterval&&(dragResizeIconInterval=setInterval(function(){G_REMOVE_dragResizeIcon&&G_keditorResizeIcon&&(G_keditorResizeIcon.parentNode&&(G_keditorResizeIcon.parentNode.removeChild(G_keditorResizeIcon),clearIfameOverDiv()),G_keditorResize_OverElem=G_keditorResizeIcon=null,clearInterval(dragResizeIconInterval),dragResizeIconInterval=null)},1500)),
KEDITORTOP.RAONKEDITOR.util.removeEvent(G_keditorResize_OverElem,"mouseout",ResizeElmOutEvt)}catch(a){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(a)}};
keditorDragResize.prototype.removeKeditorResizeDiv=function(){with(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize)try{G_keditorResizeDiv&&(G_keditorResizeDiv.parentNode&&(KEDITORTOP.RAONKEDITOR.util.removeEvent(G_keditorResizeDiv,"keydown",keyDown),KEDITORTOP.RAONKEDITOR.util.removeEvent(G_keditorResizeDiv,"mousedown",startDragElem),G_keditorResizeDiv.parentNode.removeChild(G_keditorResizeDiv)),G_keditorResizeEditIcon=G_keditorResizeDiv=null),G_keditorResizeHandleHolder&&(G_keditorResizeHandleHolder.parentNode&&
(KEDITORTOP.RAONKEDITOR.util.removeEvent(G_keditorResizeHandleHolder,"mousedown",startDragElem),G_keditorResizeHandleHolder.parentNode.removeChild(G_keditorResizeHandleHolder)),G_keditorResizeHandleHolder=null)}catch(b){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(b)}};
keditorDragResize.prototype.startDragElem=function(b,a){with(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize)try{var c=b.target||b.srcElement,d=new RegExp(resizeName+"-([trmbl]{2})","");G_setUndo=!1;if(isRightClick(b)){G_keditorResize_elem&&(c=G_keditorResize_elem);resizeHandleClear();var e=c.tagName.toLowerCase();if("img"==e)selection(c);else if("table"==e){G_keditorResize_showContext=!1;var g=getFirstRange();g.sel.removeAllRanges();G_ResizeHandlerActivatedFlag=!0;G_keditorResize_elem=c;_iframeDoc_ContextMenu(b);
setTimeout(function(){doSetCaretPosition(getMyFirstOrLastChildElementNode(c),0)},1)}return}if(c==G_keditorResizeEditIcon){c=G_keditorResize_elem;resizeHandleClear();g=getFirstRange();g.sel.removeAllRanges();"table"==c.tagName.toLowerCase()?(c=getMyFirstOrLastChildElementNode(c),doSetCaretPosition(c,0)):"div"==c.tagName.toLowerCase()&&(G_orgEnterTag=KEDITORTOP.G_CURRKEDITOR._config.enterTag,KEDITORTOP.G_CURRKEDITOR._config.enterTag="br",G_keditorResizeEditElem=c,doSetCaretPosition(c,0));KEDITORTOP.RAONKEDITOR.util.cancelEvent(b);
return}if(d.test(c.className))elmX=parseInt(G_keditorResize_elem.style.left),elmY=parseInt(G_keditorResize_elem.style.top),elmW=G_keditorResize_elem.offsetWidth,elmH=G_keditorResize_elem.offsetHeight,G_firstDrag=G_isResize=!0,iframeDocLastMouseY=iframeDocLastMouseX=lastMouseY=lastMouseX=0,handle=c;else{if(G_keditorResize_elem&&"TABLE"!=G_keditorResize_elem.nodeName&&(G_UseMouseTableInoutdent=!1,"IMG"==G_keditorResize_elem.nodeName&&"FIGURE"==G_keditorResize_elem.parentNode.tagName)){KEDITORTOP.RAONKEDITOR.util.cancelEvent(b);
return}if("1"==KEDITORTOP.G_CURRKEDITOR._config.dragResizeMovable||G_UseMouseTableInoutdent||"absolute"==G_keditorResize_elem.style.position.toLowerCase())G_isDrag=!0;else if(c.id&&"keditorResizeIcon"==c.id){G_keditorResize_elem&&"TABLE"==G_keditorResize_elem.nodeName&&(G_setUndo=!0);KEDITORTOP.RAONKEDITOR.util.cancelEvent(b);return}G_firstDrag=!0;G_lastDragY=G_lastDragX=G_dragY=G_dragX=0}KEDITORTOP.G_CURRKEDITOR.keditor_dragresize.preventScrollMove();G_REMOVE_dragResizeIcon=!1;clearInterval(dragResizeIconInterval);
clearIfameOverDiv();d=_iframeWin;b||(b=d.event);offsetX=b.clientX;offsetY=b.clientY;G_keditorResizeDiv.style.left||(G_keditorResizeDiv.style.left="0px");G_keditorResizeDiv.style.top||(G_keditorResizeDiv.style.top="0px");("1"==KEDITORTOP.G_CURRKEDITOR._config.dragResizeMovable||G_UseMouseTableInoutdent||"absolute"==G_keditorResize_elem.style.position.toLowerCase()||G_isResize)&&setKeditorResizeBackDiv();var f=getElementOffset(_iframeWin.frameElement);"doc"!=a&&(f.left=0,f.top=0);G_startX=G_UseMouseTableInoutdent?
""==G_keditorResize_elem.style.marginLeft?0:parseInt(G_keditorResize_elem.style.marginLeft):parseInt(G_keditorResizeDiv.style.left)+G_keditorResizeDivBorder-f.left;G_startY=parseInt(G_keditorResizeDiv.style.top)+G_keditorResizeDivBorder-f.top;set_ruler_vertical_height(KEDITORTOP.G_CURRKEDITOR);null!=G_keditorResizeBackDiv&&KEDITORTOP.RAONKEDITOR.util.addEvent(G_keditorResizeBackDiv,"mousemove",dragElem);KEDITORTOP.RAONKEDITOR.util.addEvent(document,"mouseup",stopDragElem);onResize({cmd:"start"});
KEDITORTOP.RAONKEDITOR.util.cancelEvent(b)}catch(h){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(h)}};
keditorDragResize.prototype.dragElem=function(b,a){with(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize)try{if(G_isResize){elementResize(b,"doc");return}G_REMOVE_dragResizeIcon=!1;if(!G_isDrag)return;var c=_iframeWin;b||(b=c.event);var d=G_startX+b.clientX-offsetX,e=G_startY+b.clientY-offsetY,g=getElementOffset(_iframeWin.frameElement);"doc"==a?(d+=g.left,e+=g.top):G_ie8Bug&&KEDITORTOP.RAONKEDITOR.browser.ie&&8==KEDITORTOP.RAONKEDITOR.browser.ieVersion&&(d-=g.left,e-=g.top);if(G_keditorResizeDiv){G_firstDrag?
(0<KEDITORTOP.G_CURRKEDITOR.UndoManager.charCount&&KEDITORTOP.G_CURRKEDITOR.UndoManager.putUndo(),G_firstDrag=!1):0==G_UseMouseTableInoutdent&&(G_keditorResize_elem.style.position="absolute");if(!(G_UseMouseTableInoutdent&&0>parseInt(G_keditorResize_elem.style.marginLeft))){var f=getClientRect(G_keditorResize_elem);G_keditorResizeDiv.style.left=g.left+f.left-G_keditorResizeDivBorder+"px"}G_UseMouseTableInoutdent||(G_keditorResizeDiv.style.top=e-G_keditorResizeDivBorder+"px");G_keditorResizeIcon&&
(G_keditorResizeIcon.style.left=d+"px","img"==G_keditorResize_elem.nodeName.toLowerCase()?G_keditorResizeIcon.style.top=e+"px":G_keditorResizeIcon.style.top=e-13+"px");var h=getClientRect(_iframeWin.frameElement),k=getWindowScrollPos(_iframeWin);0==G_UseMouseTableInoutdent&&(isNaN(parseInt(G_keditorResize_elem.style.left,10))&&(G_keditorResize_elem.style.left=d-h.left+k[0]-getClientRect(G_keditorResize_elem).left+"px"),isNaN(parseInt(G_keditorResize_elem.style.top,10))&&(G_keditorResize_elem.style.top=
e-h.top+k[1]-getClientRect(G_keditorResize_elem).top+"px"));var l=getParentPosition();if(G_UseMouseTableInoutdent){var n=d-h.left-l.left;0>n&&(n=-1);if("1"==KEDITORTOP.G_CURRKEDITOR._config.limitTableInoutdent){var c=0,q=getClientRect(G_keditorResize_elem);if(""!=_iframeDoc.body.style.width&&-1<_iframeDoc.body.style.width.indexOf("px"))c=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(_iframeDoc.body.style.width);else{c=_iframeDoc.documentElement.clientWidth;if(0==c||null==c||void 0==c)c=_iframeDoc.body.clientWidth;
c=Math.floor(c);c-=20}if(0<c){var m=c-(q.right-q.left);0>m&&(m=0);G_keditorResize_elem.style.marginLeft=n<=m?n+1+"px":m+"px"}else G_keditorResize_elem.style.marginLeft=n+1+"px"}else G_keditorResize_elem.style.marginLeft=n+1+"px"}else G_keditorResize_elem.style.left=d-h.left+k[0]-l.left+"px",G_keditorResize_elem.style.top=e-h.top+k[1]-l.top+"px";setHandlePosition()}KEDITORTOP.RAONKEDITOR.util.stopEvent(b);KEDITORTOP.RAONKEDITOR.util.cancelEvent(b)}catch(p){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&
console.log(p)}};
keditorDragResize.prototype.getParentPosition=function(){with(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize)try{for(var b={left:0,top:0},a=G_keditorResize_elem;(a=a.parentNode)&&(1!=a.nodeType||"body"!=a.tagName.toLowerCase());)""!=a.style.position&&"static"!=a.style.position&&(b.left+=isNaN(parseInt(a.style.left,10))?0:parseInt(a.style.left,10));for(a=G_keditorResize_elem;(a=a.parentNode)&&(1!=a.nodeType||"body"!=a.tagName.toLowerCase());)""!=a.style.position&&"static"!=a.style.position&&(b.top+=isNaN(parseInt(a.style.top,
10))?0:parseInt(a.style.top,10));return b}catch(c){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(c)}};
keditorDragResize.prototype.stopDragElem=function(b){with(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize)try{if(G_isDrag||G_isResize||G_setUndo)KEDITORTOP.G_CURRKEDITOR.UndoManager.putUndo(),KEDITORTOP.G_CURRKEDITOR.UndoManager.charCount=0,G_isResize&&G_keditorResize_elem&&"table"==G_keditorResize_elem.tagName.toLowerCase()&&setResizeHandle(b,!1),KEDITORTOP.G_CURRKEDITOR.keditor_dragresize.G_keditorResizeDiv&&(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize.setDragResizeDivSize(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize.G_keditorResizeDiv),
KEDITORTOP.G_CURRKEDITOR.keditor_dragresize.setDragResizeDivPosition(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize.G_keditorResizeDiv));G_setUndo=G_firstDrag=G_isDrag=G_ie8Bug=!1;G_keditorResizeIcon&&G_keditorResizeIcon.parentNode&&(G_keditorResizeIcon.parentNode.removeChild(G_keditorResizeIcon),G_keditorResizeIcon=null);dragResizeIconInterval&&(clearInterval(dragResizeIconInterval),dragResizeIconInterval=null);G_keditorResize_OverElem&&(KEDITORTOP.RAONKEDITOR.util.removeEvent(G_keditorResize_OverElem,
"mouseout",ResizeElmOutEvt),"FIGURE"==G_keditorResize_OverElem.nodeName&&0==G_isResize&&removeKeditorResizeDiv());KEDITORTOP.RAONKEDITOR.util.removeEvent(document,"mouseup",stopDragElem);removeKeditorResizeBackDiv();set_ruler_vertical_height(KEDITORTOP.G_CURRKEDITOR)}catch(a){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(a)}};
keditorDragResize.prototype.setKeditorResizeBackDiv=function(){with(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize)try{null==G_keditorResizeBackDiv&&(G_keditorResizeBackDiv=_iframeDoc.createElement("div"),G_keditorResizeBackDiv.style.position="absolute",G_keditorResizeBackDiv.style.cursor="move",G_keditorResizeBackDiv.style.zIndex=G_keditorResizeDiv.style.zIndex+1,G_keditorResizeBackDiv.style.width="100%",G_keditorResizeBackDiv.style.height="100%",G_keditorResizeBackDiv.style.left="0px",G_keditorResizeBackDiv.style.top=
"0px",KEDITORTOP.RAONKEDITOR.browser.ie&&9>KEDITORTOP.RAONKEDITOR.browser.ieVersion?(G_keditorResizeBackDiv.style.background="gray",G_keditorResizeBackDiv.style.filter="alpha(opacity=5)"):KEDITORTOP.RAONKEDITOR.browser.ie&&(G_keditorResizeBackDiv.style.background="white",G_keditorResizeBackDiv.style.opacity="0.1"),getEditorFrameDoc(KEDITORTOP.G_CURRKEDITOR).body.appendChild(G_keditorResizeBackDiv))}catch(b){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(b)}};
keditorDragResize.prototype.elementResize=function(b,a){with(this)try{if(!G_keditorResizeDiv)return;mouseX=b.pageX||b.clientX+document.documentElement.scrollLeft;mouseY=b.pageY||b.clientY+document.documentElement.scrollTop;handle&&"top"==a?(topMouseX||(topMouseX=mouseX,topMouseY=mouseY,docMouseY=docMouseX=null),0==docLastMouseX&&(docLastMouseX=lastMouseX),0==docLastMouseY&&(docLastMouseY=lastMouseY),mouseX=docLastMouseX+(mouseX-topMouseX),mouseY=docLastMouseY+(mouseY-topMouseY),iframeDocLastMouseX=
mouseX,iframeDocLastMouseY=mouseY):handle&&"doc"==a&&(docMouseX||(docMouseX=mouseX,docMouseY=mouseY,topMouseY=topMouseX=null),mouseX=iframeDocLastMouseX+(mouseX-docMouseX),mouseY=iframeDocLastMouseY+(mouseY-docMouseY),docLastMouseX=mouseX,docLastMouseY=mouseY);var c=mouseX-lastMouseX+mOffX,d=mouseY-lastMouseY+mOffY;mOffX=mOffY=0;lastMouseX=mouseX;lastMouseY=mouseY;!a&&handle&&(iframeDocLastMouseX=mouseX,iframeDocLastMouseY=mouseY);if(!handle)return!0;G_firstDrag&&(0<KEDITORTOP.G_CURRKEDITOR.UndoManager.charCount&&
KEDITORTOP.G_CURRKEDITOR.UndoManager.putUndo(),G_firstDrag=!1);var e=!1;if(this.resizeHandleDrag&&this.resizeHandleDrag(c,d))e=!0;else{var g=c,f=d;elmX+g<minLeft?mOffX=g-(c=minLeft-elmX):elmX+elmW+g>maxLeft&&(mOffX=g-(c=maxLeft-elmX-elmW));elmY+f<minTop?mOffY=f-(d=minTop-elmY):elmY+elmH+f>maxTop&&(mOffY=f-(d=maxTop-elmY-elmH));elmX+=c;elmY+=d}if(e){var h=getElementBorderWidth(),k=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(h.borderTopWidth)+KEDITORTOP.RAONKEDITOR.util.parseIntOr0(h.borderBottomWidth),
l=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(G_keditorResize_elem.style.paddingTop)+KEDITORTOP.RAONKEDITOR.util.parseIntOr0(G_keditorResize_elem.style.paddingBottom),n=G_keditorResize_elem.style.width,q=G_keditorResize_elem.style.height,m,e=0,p,v,x,g=0;if(-1<n.indexOf("%")||-1<q.indexOf("%")){var r=getClientRect(G_keditorResize_elem);m=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(r.right-r.left);e=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(r.bottom-r.top);n&&-1<n.indexOf("%")&&(v=m,p=KEDITORTOP.RAONKEDITOR.util.parseFloatOr0(n).toFixed(2));
q&&-1<q.indexOf("%")&&(g=e,x=KEDITORTOP.RAONKEDITOR.util.parseFloatOr0(q).toFixed(2))}else if(m=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(G_keditorResize_elem.style.width,10),e=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(G_keditorResize_elem.style.height,10),0==m||0==e)r=getClientRect(G_keditorResize_elem),0==m&&(m=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(r.right-r.left)),0==e&&(e=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(r.bottom-r.top));var t=handle&&handle.className&&handle.className.match(new RegExp(resizeName+
"-([tmblr]{2})"))?RegExp.$1:"";if("IMG"==G_keditorResize_elem.tagName&&(-1<t.indexOf("br")||-1<t.indexOf("bl")||-1<t.indexOf("tl")||-1<t.indexOf("tr")))m=parseInt(elmW,10)-(k+l),e=parseInt(elmH,10)-(k+l),-1<n.indexOf("%")&&-1<q.indexOf("%")?setNodeWidthHeight(G_keditorResize_elem,{width:KEDITORTOP.RAONKEDITOR.util.parseFloatOr0(p*m/v).toFixed(2)+"%",height:KEDITORTOP.RAONKEDITOR.util.parseFloatOr0(x*e/g).toFixed(2)+"%"}):-1<n.indexOf("%")?(setNodeWidthHeight(G_keditorResize_elem,{width:KEDITORTOP.RAONKEDITOR.util.parseFloatOr0(p*
m/v).toFixed(2)+"%"}),""!=q&&setNodeWidthHeight(G_keditorResize_elem,{height:e+"px"})):-1<q.indexOf("%")?(setNodeWidthHeight(G_keditorResize_elem,{height:KEDITORTOP.RAONKEDITOR.util.parseFloatOr0(x*e/g).toFixed(2)+"%"}),""!=n&&setNodeWidthHeight(G_keditorResize_elem,{width:m+"px"})):setNodeWidthHeight(G_keditorResize_elem,{width:m+"px",height:KEDITORTOP.RAONKEDITOR.util.parseIntOr0(1*m/G_ImageR)+"px"});else{if(0<=t.indexOf("l")||0<=t.indexOf("r"))m=parseInt(elmW,10)-(k+l),-1<n.indexOf("%")?setNodeWidthHeight(G_keditorResize_elem,
{width:KEDITORTOP.RAONKEDITOR.util.parseFloatOr0(p*m/v).toFixed(2)+"%"}):setNodeWidthHeight(G_keditorResize_elem,{width:m+"px"}),(""==G_keditorResize_elem.style.height||G_keditorResize_elem.getAttribute("height")||""==G_keditorResize_elem.getAttribute("height"))&&setNodeWidthHeight(G_keditorResize_elem,{height:e+"px"});if(0<=t.indexOf("t")||0<=t.indexOf("b"))e=parseInt(elmH,10)-(k+l),-1<q.indexOf("%")?setNodeWidthHeight(G_keditorResize_elem,{height:KEDITORTOP.RAONKEDITOR.util.parseFloatOr0(x*e/g).toFixed(2)+
"%"}):setNodeWidthHeight(G_keditorResize_elem,{height:e+"px"}),(""==G_keditorResize_elem.style.width||G_keditorResize_elem.getAttribute("width")||""==G_keditorResize_elem.getAttribute("width"))&&setNodeWidthHeight(G_keditorResize_elem,{width:m+"px"})}"1"==KEDITORTOP.G_CURRKEDITOR._config.dragResizeMovable&&(G_keditorResize_elem.style.left=parseInt(elmX,10)+"px",G_keditorResize_elem.style.top=parseInt(elmY,10)+"px");k=!1;l=[];if("table"==G_keditorResize_elem.tagName.toLowerCase()){for(var k=!0,r=G_keditorResize_elem,
J=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(G_keditorResize_elem.style.width,10),K=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(G_keditorResize_elem.style.height,10),f=0,G=r.rows.length,h=0;h<G;h++)var z=r.rows[h],f=f+parseFloat(getClientRect(z.cells[0]).height);for(h=0;h<G;h++){for(var z=r.rows[h],B=z.cells.length,H=0==h,A=0,u=0;u<B;u++)var w=z.cells[u],A=A+parseFloat(getClientRect(w).width);if((0<=t.indexOf("l")||0<=t.indexOf("r"))&&J!=A)for(A=(A-J)/B,u=0;u<B;u++){var w=z.cells[u],I=Math.floor(100*parseFloat(parseFloat(w.style.width.replace("px",
""))-A+parseFloat(c/B)))/100;w.style.width=I+"px";w.width&&(w.width=I);if(H&&G_keditorResize_elem.style.tableLayout&&"fixed"==G_keditorResize_elem.style.tableLayout){var L=G_keditorResize_elem.getElementsByTagName("colgroup");if(0<L.length){var O=L[0].getElementsByTagName("col");l.push({col:O[u],width:I})}}}if((0<=t.indexOf("t")||0<=t.indexOf("b"))&&K!=f)for(H=(f-K)/G,u=0;u<B;u++){var w=z.cells[u],M=Math.floor(100*parseFloat(parseFloat(w.style.height.replace("px",""))-H+parseFloat(d/G)))/100;w.style.height=
M+"px";w.height&&(w.height=M)}}}setHandlePosition();for(c=0;c<l.length;c++)l[c].col.style.width=l[c].width+"px",l[c].col.width=l[c].width;G_keditorResizeHandleHolder.keditor_resizeinfo.style.display="";G_keditorResizeHandleHolder.keditor_resizeinfo.style.zIndex=1E6;G_keditorResizeHandleHolder.keditor_resizeinfo.style.top=handle.offsetTop+"px";G_keditorResizeHandleHolder.keditor_resizeinfo.style.left=handle.offsetLeft+"px";G_keditorResizeHandleHolder.keditor_resizeinfo.firstChild&&G_keditorResizeHandleHolder.keditor_resizeinfo.removeChild(G_keditorResizeHandleHolder.keditor_resizeinfo.firstChild);
var C=document.createElement("span"),D=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(getNodeWidthHeight(G_keditorResize_elem,"width"),10),y=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(getNodeWidthHeight(G_keditorResize_elem,"height"),10);if(7!=KEDITORTOP.RAONKEDITOR.browser.ieVersion&&"video"!=G_keditorResize_elem.tagName.toLowerCase()){var E=getNodeWidthHeight(G_keditorResize_elem,"maxWidth");""!=E&&(E=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(E,10),D=D>E?E:D);var F=getNodeWidthHeight(G_keditorResize_elem,"maxHeight");
""==F||k||(F=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(F,10),y=y>F?F:y)}if(0==y)var N=getClientRect(G_keditorResize_elem),y=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(N.bottom-N.top);-1<n.indexOf("%")&&-1<q.indexOf("%")?C.innerHTML=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(p*m/v)+"% X "+KEDITORTOP.RAONKEDITOR.util.parseIntOr0(x*e/g)+"%":-1<n.indexOf("%")?C.innerHTML=""==q?KEDITORTOP.RAONKEDITOR.util.parseFloatOr0(p*m/v).toFixed(2)+"%":KEDITORTOP.RAONKEDITOR.util.parseIntOr0(p*m/v)+"% X "+y:-1<q.indexOf("%")?
C.innerHTML=""==n?KEDITORTOP.RAONKEDITOR.util.parseFloatOr0(x*e/g).toFixed(2)+"%":D+" X "+KEDITORTOP.RAONKEDITOR.util.parseIntOr0(x*e/g)+"%":C.innerHTML=D+" X "+y;G_keditorResizeHandleHolder.keditor_resizeinfo.appendChild(C)}G_keditorResizeDiv&&(this.setDragResizeDivPosition(G_keditorResizeDiv),this.setDragResizeDivSize(G_keditorResizeDiv));KEDITORTOP.RAONKEDITOR.util.cancelEvent(b)}catch(P){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(P)}};
keditorDragResize.prototype.getElementBorderWidth=function(){with(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize)try{var b={borderTopWidth:G_keditorResize_elem.style.borderTopWidth,borderBottomWidth:G_keditorResize_elem.style.borderBottomWidth};"thick"==b.borderTopWidth?b.borderTopWidth=5:"medium"==b.borderTopWidth?b.borderTopWidth=3:"thin"==b.borderTopWidth&&(b.borderTopWidth=1);"thick"==b.borderBottomWidth?b.borderBottomWidth=5:"medium"==b.borderBottomWidth?b.borderBottomWidth=3:"thin"==b.borderBottomWidth&&
(b.borderBottomWidth=1);return b}catch(a){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(a)}};
keditorDragResize.prototype.resizeHandleDrag=function(b,a){with(this)try{var c=handle&&handle.className&&handle.className.match(new RegExp(resizeName+"-([tmblr]{2})"))?RegExp.$1:"",d=a,e=b,g=!1;0<=c.indexOf("t")&&(rs=1,elmH-d<minHeight?mOffY=d-(a=elmH-minHeight):elmY+d<minTop&&(mOffY=d-(a=minTop-elmY)),elmY+=a,elmH-=a,g=!0);0<=c.indexOf("b")&&(rs=1,elmH+d<minHeight?mOffY=d-(a=minHeight-elmH):elmY+elmH+d>maxTop&&(mOffY=d-(a=maxTop-elmY-elmH)),elmH+=a,g=!0);0<=c.indexOf("l")&&(rs=1,elmW-e<minWidth?
mOffX=e-(b=elmW-minWidth):elmX+e<minLeft&&(mOffX=e-(b=minLeft-elmX)),elmX+=b,elmW-=b,g=!0);0<=c.indexOf("r")&&(rs=1,elmW+e<minWidth?mOffX=e-(b=minWidth-elmW):elmX+elmW+e>maxLeft&&(mOffX=e-(b=maxLeft-elmX-elmW)),elmW+=b,g=!0);return g}catch(f){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(f)}};
keditorDragResize.prototype.mouseUp=function(b){with(this)try{if(isRightClick(b)||checkClickOnScrollBar(b)||KEDITORTOP.G_CURRKEDITOR.isMouseDownOnScrollBar)return;var a=!0;try{if(0==G_isResize){var c=b.target?b.target:b.srcElement;if(c){var d=null,e=null;9!=c.nodeType&&(d=c.ownerDocument);(e=getDocWindow(d).frameElement)?0!=e.id.indexOf("raonk_frame_")&&0!=e.id.indexOf("keditor_design_")&&(a=!1):a=!1}}}catch(g){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(g)}if(0==
a){resizeHandleClear();return}if(G_keditorResize_elem&&"img"==G_keditorResize_elem.tagName.toLowerCase()&&"absolute"!=G_keditorResize_elem.style.position){var f,h;if(-1<G_keditorResize_elem.style.width.indexOf("%")||-1<G_keditorResize_elem.style.height.indexOf("%")){var k=getClientRect(G_keditorResize_elem);f=k.right-k.left;h=k.bottom-k.top}else""!=G_keditorResize_elem.style.width?f=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(G_keditorResize_elem.style.width):(k=getClientRect(G_keditorResize_elem),f=
k.right-k.left),""!=G_keditorResize_elem.style.height?h=KEDITORTOP.RAONKEDITOR.util.parseIntOr0(G_keditorResize_elem.style.height):(k=getClientRect(G_keditorResize_elem),h=k.bottom-k.top);G_ImageR=1*f/h;try{var l=G_keditorResize_elem.parentNode;if(!KEDITORTOP.RAONKEDITOR.browser.chrome&&!KEDITORTOP.RAONKEDITOR.browser.opera){if(G_keditorResize_elem.parentNode.tagName&&"figure"==G_keditorResize_elem.parentNode.tagName.toLowerCase()){var n=G_keditorResize_elem.parentNode.getElementsByTagName("figcaption");
n&&n[0]&&(l=getMyFirstOrLastChildElementNode(n[0]),rangy.getSelection(_iframeWin).removeAllRanges(),doSetCaretPosition(l,0))}KEDITORTOP.RAONKEDITOR.browser.ie&&9>KEDITORTOP.RAONKEDITOR.browser.ieVersion&&(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize.preventScrollMove(),doSetCaretPosition(l,0))}}catch(q){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(q)}}G_keditorResize_elem.getAttribute("raon_chart")&&G_keditorResize_elem.setAttribute("raon_plugin","chart");onChange({editor:KEDITORTOP.G_CURRKEDITOR,
isPossibleDirty:!0});stopDragElem();KEDITORTOP.G_CURRKEDITOR.keditor_dragresize.removePreventScrollMove();onResize({cmd:"end",event:b,target:G_keditorResize_elem,isResize:G_isResize});deselect(!1);G_isResize=!1;if("1"==KEDITORTOP.G_CURRKEDITOR._config.returnEvent.mouse_event)try{var a={strEventName:"mouseup",objEvent:b,objElement:G_keditorResize_elem},m;"function"===typeof KEDITORTOP.G_CURRKEDITOR._config.event.mouse?m=KEDITORTOP.G_CURRKEDITOR._config.event.mouse(KEDITORTOP.G_CURRKEDITOR.ID,a):"function"===
typeof KEDITORTOP.KEDITORWIN.RAONKEDITOR_MouseEvent&&(m=KEDITORTOP.KEDITORWIN.RAONKEDITOR_MouseEvent(KEDITORTOP.G_CURRKEDITOR.ID,a));if(!1===m){KEDITORTOP.RAONKEDITOR.util.cancelEvent(b);return}}catch(p){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(p)}docMouseY=docMouseX=topMouseY=topMouseX=null}catch(v){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(v)}};
keditorDragResize.prototype.deselect=function(b){with(this)try{G_keditorResizeHandleHolder&&(G_keditorResizeHandleHolder.keditor_resizeinfo.style.display="none",G_keditorResizeHandleHolder.keditor_resizeinfo.innerHTML=""),handle=null,mOffY=mOffX=0}catch(a){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(a)}};
keditorDragResize.prototype.resizeHandleClear=function(){with(this)try{if(1==G_ResizeHandlerActivatedFlag){G_ResizeHandlerActivatedFlag=!1;return}stopDragElem();clearIfameOverDiv();removeKeditorResizeDiv();G_mouseOveriframeObj=G_keditorResize_elem=G_keditorResizeIcon=G_keditorResize_OverElem=null}catch(b){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(b)}};
keditorDragResize.prototype.clearIfameOverDiv=function(){with(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize)try{G_keditorIframeOverDiv&&G_keditorIframeOverDiv.parentNode&&(KEDITORTOP.RAONKEDITOR.util.removeEvent(G_keditorIframeOverDiv,"mousedown",ifameOverDivClick),G_keditorIframeOverDiv.parentNode.removeChild(G_keditorIframeOverDiv)),G_keditorIframeOverDiv=null}catch(b){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(b)}};
keditorDragResize.prototype.removeKeditorResizeBackDiv=function(){with(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize)try{G_keditorResizeBackDiv&&(G_keditorResizeBackDiv.parentNode&&(KEDITORTOP.RAONKEDITOR.util.removeEvent(G_keditorResizeBackDiv,"mousemove",dragElem),G_keditorResizeBackDiv.parentNode.removeChild(G_keditorResizeBackDiv)),G_keditorResizeBackDiv=null)}catch(b){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(b)}};
keditorDragResize.prototype.keyDown=function(b){with(KEDITORTOP.G_CURRKEDITOR.keditor_dragresize)try{if(!G_keditorResize_elem)return;var a=G_keditorResize_elem,c=b.ctrlKey,d="which"in b?b.which:b.keyCode;if(G_keditorResizeDiv)if(37<=d&&40>=d){if("1"==KEDITORTOP.G_CURRKEDITOR._config.dragResizeMovable||G_UseMouseTableInoutdent){"1"==KEDITORTOP.G_CURRKEDITOR._config.dragResizeMovable&&(G_keditorResize_elem.style.position="absolute");switch(d){case 37:G_UseMouseTableInoutdent?G_keditorResize_elem.style.marginLeft=
parseIntOr0(G_keditorResize_elem.style.marginLeft,10)-1+"px":G_keditorResize_elem.style.left=parseIntOr0(G_keditorResize_elem.style.left,10)-1+"px";G_keditorResizeDiv.style.left=parseIntOr0(G_keditorResizeDiv.style.left,10)-1+"px";break;case 38:"1"==KEDITORTOP.G_CURRKEDITOR._config.dragResizeMovable&&(G_keditorResize_elem.style.top=parseIntOr0(G_keditorResize_elem.style.top,10)-1+"px",G_keditorResizeDiv.style.top=parseIntOr0(G_keditorResizeDiv.style.top,10)-1+"px");break;case 39:G_UseMouseTableInoutdent?
G_keditorResize_elem.style.marginLeft=parseIntOr0(G_keditorResize_elem.style.marginLeft,10)+1+"px":G_keditorResize_elem.style.left=parseIntOr0(G_keditorResize_elem.style.left,10)+1+"px";G_keditorResizeDiv.style.left=parseIntOr0(G_keditorResizeDiv.style.left,10)+1+"px";break;case 40:"1"==KEDITORTOP.G_CURRKEDITOR._config.dragResizeMovable&&(G_keditorResize_elem.style.top=parseIntOr0(G_keditorResize_elem.style.top,10)+1+"px",G_keditorResizeDiv.style.top=parseIntOr0(G_keditorResizeDiv.style.top,10)+1+
"px")}setHandlePosition();KEDITORTOP.RAONKEDITOR.util.cancelEvent(b);return}resizeHandleClear()}else if(c&&(86==d||65==d||88==d||67==d)||46==d||8==d){resizeHandleClear();var e=a.tagName.toLowerCase();if((46==d||8==d)&&-1<G_deleteCheckTagName.indexOf(","+e+",")){if("table"!=e){var g=getFirstRange().sel,f=getFirstRange().range;f.setStartBefore(a);f.setEndBefore(a);g.removeAllRanges();g.addRange(f)}a.parentNode.removeChild(a);KEDITORTOP.RAONKEDITOR.util.cancelEvent(b)}else{if("img"==e){var h=GetParentbyTagName(a,
"figure");if(h&&(a=h,46==d||8==d)){a.parentNode.removeChild(a);KEDITORTOP.RAONKEDITOR.util.cancelEvent(b);return}}selection(a)}}else(c&&90==d||89==d||!c)&&resizeHandleClear();removePreventScrollMove()}catch(k){KEDITORTOP&&KEDITORTOP.RAONKEDITOR&&KEDITORTOP.RAONKEDITOR.logMode&&console.log(k)}};
keditorDragResize.prototype.setDragResizeDivSize=function(b){with(this){var a=0,c=0,c=getClientRect(G_keditorResize_elem),a=c.right>=_iframeDoc.documentElement.clientWidth?_iframeDoc.documentElement.clientWidth-c.left:c.right-c.left;0>a&&(a=0);var d=0,d=KEDITORTOP.RAONKEDITOR.browser.ie?_iframeDoc.documentElement.clientHeight:_iframeDoc.body.clientHeight,c=c.bottom>=d?d-c.top:c.bottom-c.top;0>c&&(c=0);b.style.width=a+"px";b.style.height=c+"px"}};
keditorDragResize.prototype.setDragResizeDivPosition=function(b){with(this){var a=getElementOffset(_iframeWin.frameElement),c=getWindowScrollPos(_iframeWin),d=0,e=0;KEDITORTOP.RAONKEDITOR.browser.ie&&8>=KEDITORTOP.RAONKEDITOR.browser.ieVersion?(d=getElementOffset(G_keditorResize_elem).left+a.left-G_keditorResizeDivBorder,e=getElementOffset(G_keditorResize_elem).top+a.top-G_keditorResizeDivBorder):(d=getElementOffset(G_keditorResize_elem).left+a.left-G_keditorResizeDivBorder-c[0],e=getElementOffset(G_keditorResize_elem).top+
a.top-G_keditorResizeDivBorder-c[1]);if("1"==KEDITORTOP.G_CURRKEDITOR._config.dragResizeMovable||G_UseMouseTableInoutdent)b.style.left=d+"px";b.style.top=e+"px"}};keditorDragResize.prototype.preventScrollMove=function(){KEDITORTOP.RAONKEDITOR.browser.ie&&9>KEDITORTOP.RAONKEDITOR.browser.ieVersion&&preventScrollMove(!0)};keditorDragResize.prototype.removePreventScrollMove=function(){KEDITORTOP.RAONKEDITOR.browser.ie&&9>KEDITORTOP.RAONKEDITOR.browser.ieVersion&&preventScrollMove(!1)};
